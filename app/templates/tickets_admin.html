{% extends "layout.html" %}

{% block contents %}

<script type="text/javascript">var password = "{{password}}";</script>

<h1>McMentor Mama</h1>

<h3>Over {{ tickets|length }} hackers helped since 2015!</h3>

    <ul id='tickets-list' ng-controller='TicketListController'>
        {# The id for the li is very important, see environment.js,
        and adminchat.js #}
        {% raw %}
        <li ng-repeat='ticket in tickets' id='ticket-list-item-{{ ticket.ticketId }}'
                class='ticket-list-type-{{ ticket.ticketStatusName }}'>
            <p class='tl-username'>
            {{ ticket.userName }} ( {{ ticket.userEmail }} )
            </p>

            <p class='tl-email' style='display: none;'>
                {{ ticket.userEmail }}
            </p>

            <p class='tl-ticketstatus'>
            {{ ticket.ticketStatusName }}
            </p>

            <p class='tl-tablenumber'>
            table #{{ ticket.ticketTableNumber }}
            </p>

            <p class='tl-ticketcontents'>{{ ticket.ticketContents }}</p>

            <!--
            {% if ticket.ticketMentorData == None %}
            <textarea class='tl-ticketmentordata'></textarea>
            {% else %}
            <textarea class='tl-ticketmentordata' autocomplete='off'>
                {{ ticket.ticketMentorData }}
            </textarea>
            {% endif %}
            -->

            <button
                ng-click="deleteTicket(ticket.ticketId);">
                Nuke it
            </button>

            <select class="response-options">
                <option value="Your mentor is on their way!">Dispatched</option>
                <option value="There are no mentors available right now. We will let you know when one is free.">No mentor available</option>
                <option value="We can't seem to find you. Where are you located?">Can't find</option>
                <option value="Could you give some more details about your issue?">More details</option>
                <option value="No problem! Happy hacking :)">You're welcome</option>
            </select>

            <button class="send-message"
                ng-click="sendAdminMessage(ticket.ticketId);">
                Send message
            </button>

            <select class='tl-status' autocomplete='off'>
                <option ng-repeat='ticketStatus in ticketStatuses'
                    ng-value='ticketStatus' ng-selected='ticketStatus === ticket.ticketStatusName'>
                {{ ticketStatus }}
                </option>
            </select>

            <button
                ng-click="mentorship.sendModifyTicket(ticket.ticketId);">
                Update
            </button>
        </li>
        {% endraw %}
    </ul>

<script type="text/javascript" src="/static/javascripts/adminchat.js"></script>

{% endblock %}
